<div class="flex flex-col p-6">
  <div class="font-bold text-3xl">Goals</div>
  <div class="flex justify-between space-x-8 mt-8">
    <div
      class="flex justify-center items-center cursor-pointer"
      (click)="toggleGoalForm()"
      *ngIf="!showUpdateGoalsForm && !showGoalsForm"
    >
      <span
        class="text-4xl rounded-full bg-green w-11 h-11 items-center flex my-auto justify-center pb-1"
        >+</span
      >
      <span class="arrow-left"></span>
      <span class="text-xl rounded-lg py-2 px-4 bg-white text-black"
        >Add a goal</span
      >
    </div>
    <div
      (click)="deleteAllConfirmation()"
      class="bg-danger rounded-lg flex justify-center items-center cursor-pointer hover:bg-[#bb0c0c]"
      *ngIf="!showGoalsForm && !showUpdateGoalsForm && goals?.length > 0"
    >
      <div class="mx-auto px-4 py-2 space-x-2">
        <span class="text-2xl rounded-full"
          ><i class="fa fa-trash-alt"></i
        ></span>
        <span class="text-xl rounded-lg">Delete all</span>
      </div>
    </div>
  </div>
</div>
<ng-container *ngIf="showGoalsForm">
  <div
    class="flex justify-start pl-8 pb-8 pr-12"
    
  >
    <i class="fa-solid fa-arrow-left text-3xl text-white cursor-pointer" (click)="toggleGoalForm()"></i>
  </div>
  <form [formGroup]="goalsForm" (ngSubmit)="onSubmit(goalsForm.value)">
    <div class="space-x-1">
      <div class="text-2xl flex flex-wrap p-6">
        <div class="w-1/3 pr-2">
          <label class="block text-gray-700 font-bold mb-2" for="title">
            Title
          </label>
          <input
            type="text"
            id="title"
            class="w-full px-3 py-2 border text-black dark:text-primary rounded-lg"
            [disabled]="isFieldDisabled"
            formControlName="title"
          />
        </div>
      </div>

      <div class="text-2xl grid grid-cols-4 gap-6 p-6">
        <div class="">
          <label class="block text-gray-700 font-bold mb-2" for="startDate">
            Start Date
          </label>
          <input
            id="startDate"
            type="date"
            class="w-full px-3 py-2 border text-black dark:text-primary rounded-lg"
            formControlName="startDate"
          />
        </div>
        <div class="">
          <label class="block text-gray-700 font-bold mb-2" for="endDate">
            End Date
          </label>
          <input
            id="endDate"
            type="date"
            class="w-full px-3 py-2 border text-black dark:text-primary rounded-lg"
            formControlName="endDate"
          />
        </div>
        <div class="">
          <label class="block text-gray-700 font-bold mb-2" for="target">
            Target
          </label>
          <input
            id="target"
            type="number"
            class="w-full px-3 py-2 border text-black dark:text-primary rounded-lg"
            formControlName="target"
          />
        </div>
        <div class="">
          <label class="block text-gray-700 font-bold mb-2" for="saving">
            Saving
          </label>
          <input
            id="saving"
            type="number"
            class="w-full px-3 py-2 border text-black dark:text-primary rounded-lg"
            formControlName="saving"
          />
        </div>
      </div>

      <div class="text-2xl p-6">
        <label class="block text-gray-700 font-bold mb-2" for="description">
          Description
        </label>
        <textarea
          type="text"
          id="description"
          class="w-full px-3 py-2 border text-black dark:text-primary rounded-lg"
          formControlName="description"
        ></textarea>
      </div>
    </div>

    <div class="flex justify-center">
      <button type="submit" class="bg-green px-4 py-2 rounded-lg text-2xl">
        Add goal
      </button>
    </div>
  </form>
</ng-container>

<!-- ------------------------------------------------------------ -->
<!-- 
<p>Arjun Jain</p> -->

<ng-container *ngIf="showUpdateGoalsForm">
  <div
    class="flex justify-start pl-8 pb-8 pr-12"
    
  >
    <i class="fa-solid fa-arrow-left text-3xl text-white cursor-pointer" (click)="toggleUpdateGoalForm()"></i>
  </div>
  <form
    [formGroup]="updateGoalsForm"
    (ngSubmit)="onUpdateGoal(updateGoalsForm.value)"
  >
    <div class="space-x-1">
      <div class="text-2xl flex flex-wrap p-6">
        <div class="w-1/3 pr-2">
          <label class="block text-gray-700 font-bold mb-2" for="title">
            Title
          </label>
          <input
            [value]="myGoal.title"
            type="text"
            id="uTitleField"
            class="w-full px-3 py-2 border text-black dark:text-primary rounded-lg"
            disabled
          />
        </div>
      </div>

      <div class="text-2xl grid grid-cols-4 gap-6 p-6">
        <div class="">
          <label class="block text-gray-700 font-bold mb-2" for="startDate">
            Start Date
          </label>
          <input
            [value]="myGoal.startDate"
            id="uStartDateField"
            type="date"
            class="w-full px-3 py-2 border text-black dark:text-primary rounded-lg"
            disabled
          />
        </div>
        <div class="">
          <label class="block text-gray-700 font-bold mb-2" for="endDate">
            End Date
          </label>
          <input
            formControlName="endDate"
            id="uEndDateField"
            type="date"
            class="w-full px-3 py-2 border text-black dark:text-primary rounded-lg"
          />
        </div>
        <div class="">
          <label class="block text-gray-700 font-bold mb-2" for="target">
            Target
          </label>
          <input
            formControlName="target"
            id="uTargetField"
            type="number"
            class="w-full px-3 py-2 border text-black dark:text-primary rounded-lg"
          />
        </div>
        <div class="">
          <label class="block text-gray-700 font-bold mb-2" for="saving">
            Saving
          </label>
          <input
            formControlName="saving"
            id="uSavingField"
            type="number"
            class="w-full px-3 py-2 border text-black dark:text-primary rounded-lg"
          />
        </div>
      </div>

      <div class="text-2xl p-6">
        <label class="block text-gray-700 font-bold mb-2" for="description">
          Description
        </label>
        <textarea
          formControlName="description"
          type="text"
          id="uDescriptionField"
          class="w-full px-3 py-2 border text-black dark:text-primary rounded-lg"
        ></textarea>
      </div>
    </div>

    <div class="flex justify-center">
      <button type="submit" class="bg-green px-4 py-2 rounded-lg text-2xl">
        Update goal
      </button>
    </div>
  </form>
</ng-container>

<!-- -------------------------------------------- -->

<ng-container *ngIf="!showUpdateGoalsForm && !showGoalsForm">
  <div class="grid grid-row-{{ totalGoals }} p-6">
    <ng-container *ngIf="goals?.length <= 0">
      <div class="mx-auto text-3xl">No goals in your life! ðŸ’€</div>
    </ng-container>

    <ng-container *ngIf="goals?.length > 0">
      <ng-container *ngFor="let goal of goals; let i = index">
        <div
          class="bg-[#227C70] flex flex-col p-[20px] justify-start rounded-xl items-center mt-10"
          [style.background-color]="getBoxColor()"
        >
          <div class="items-start">
            <h1
              class="text-3xl font-bold justify-start flex flex-col items-start mx-auto"
            >
              <span class="font-mono">{{ goal.title }}</span>

              <span class="mt-3 text-sm font-merriweather">
                Target : {{ goal.target }}
              </span>
            </h1>
          </div>

          <span
            class="text-[10px] ml-2 mt-[5px] text-sm text-white flex justify-start w-full"
          >
           
            <ng-container
              *ngIf="updateProgressBar(goal.target, goal.saving) >= 0"
            >
              Saved: {{ goal.saving }}
            </ng-container>
          </span>

          <div
            class="h-[10px] mt-[1px] w-full bg-black dark:bg-black justify-start align-start rounded-xl"
          >
            <div
              class="h-[10px] flex justify-center text-center items-center text-xs font-medium text-primary-100 rounded-xl"
              [style.width.%]="updateProgressBar(goal.target, goal.saving)"
              [style.backgroundColor]="getColor(goal.target, goal.saving)"
            ></div>
          </div>

          <div
            type="button"
            class="text-white font-bold rounded mt-3 flex justify-end w-full"
          >
            <span
              class="flex w-full items-center cursor-pointer ml-1"
              (click)="toggleDescription(i)"
            >
              <ng-container *ngIf="!showingDes[i]"
                >Show More <span class="mb-2 ml-2"> âŒ„</span></ng-container
              >
              <ng-container *ngIf="showingDes[i]"
                >Show Less <span class="mt-2 ml-3"> âŒƒ</span></ng-container
              >
            </span>
            <button class="flex space-x-3">
              <p
                (click)="updateGoal(goal, i)"
                class="cursor-pointer text-white bg-info hover:bg-[#1366a1] rounded-md p-1 px-2 text-[15px] border border-white shadow-button"
              >
                Update
              </p>
              <p
                (click)="deleteConfirmation(goal)"
                class="cursor-pointer text-white bg-danger hover:bg-[#bb0c0c] rounded-md p-1 px-2 text-[15px] border border-white shadow-button"
              >
                Delete
              </p>
            </button>
          </div>
          <div
            *ngIf="showingDes[i]"
            class="flex justify-start flex-row items-start mt-4 w-full"
          >
            <p class="w-1/3 text-justify font-mono ml-1">
              Description: {{ goal.description }}
            </p>
            <span class="flex flex-col justify center ml-[150px] font-mono">
              <p>Start Date: {{ goal.startDate }}</p>
              <p class="mt-3">End Date: {{ goal.endDate }}</p>
            </span>
          </div>
        </div>
      </ng-container>
    </ng-container>
  </div></ng-container
>
